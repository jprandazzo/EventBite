{"ast":null,"code":"import { csrfFetch } from \"./csrf\";\nexport const RECEIVE_USER = 'users/RECEIVE_USER';\nexport const REMOVE_USER = 'users/REMOVE_USER';\nexport const fetchUser = userId => async dispatch => {\n  const response = await fetch(`/api/users/${userId}`);\n  const data = await response.json();\n  dispatch({\n    type: RECEIVE_USER,\n    user: data\n  });\n};\nexport const createUser = user => async dispatch => {\n  const response = await csrfFetch(`/api/users/`, {\n    method: 'POST',\n    body: JSON.stringify(user)\n  });\n  const data = await response.json();\n  sessionStorage.setItem('currentUser', JSON.stringify(data.user));\n  dispatch({\n    type: RECEIVE_USER,\n    user: data\n  });\n};\nexport const loginUser = user => async dispatch => {\n  let res = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify(user)\n  });\n  debugger;\n  let data = await res.json();\n  debugger;\n  sessionStorage.setItem('currentUser', JSON.stringify(data.user));\n  debugger;\n  dispatch({\n    type: RECEIVE_USER,\n    user: data\n  });\n};\nexport const logoutUser = userId => async dispatch => {\n  let res = await csrfFetch('/api/session', {\n    method: 'DELETE'\n  });\n  sessionStorage.setItem('currentUser', null);\n  dispatch({\n    type: REMOVE_USER,\n    userId: userId\n  });\n};\nexport const updateUser = user => async dispatch => {\n  const response = await csrfFetch(`/api/users/${user.id}`, {\n    method: 'PATCH',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(user)\n  });\n  const data = await response.json();\n  dispatch({\n    type: RECEIVE_USER,\n    user: data\n  });\n};\nexport default function usersReducer(state = {}, action) {\n  let newState = {\n    ...state\n  };\n  switch (action.type) {\n    case RECEIVE_USER:\n      newState[action.user.id] = action.user;\n      return newState;\n    case REMOVE_USER:\n      delete newState[action.userId];\n      return newState;\n    default:\n      return state;\n  }\n}","map":{"version":3,"names":["csrfFetch","RECEIVE_USER","REMOVE_USER","fetchUser","userId","dispatch","response","fetch","data","json","type","user","createUser","method","body","JSON","stringify","sessionStorage","setItem","loginUser","res","logoutUser","updateUser","id","headers","usersReducer","state","action","newState"],"sources":["/Users/joerandazzo/Documents/App Academy/aA Projects/Eventbite2/eventbite/frontend/src/store/usersReducer.js"],"sourcesContent":["import { csrfFetch } from \"./csrf\"\n\nexport const RECEIVE_USER = 'users/RECEIVE_USER'\nexport const REMOVE_USER = 'users/REMOVE_USER'\n\nexport const fetchUser = (userId) => async dispatch => {\n    const response = await fetch(`/api/users/${userId}`)\n    const data = await response.json();\n\n    dispatch({\n        type: RECEIVE_USER,\n        user: data\n    })\n}\n\nexport const createUser = (user) => async dispatch => {\n    const response = await csrfFetch(`/api/users/`, {\n        method: 'POST',\n        body: JSON.stringify(user)\n    })\n    const data = await response.json();\n\n    sessionStorage.setItem('currentUser', JSON.stringify(data.user));\n    dispatch({\n        type: RECEIVE_USER,\n        user: data\n    })\n}\n\nexport const loginUser = user => async dispatch => {\n    let res = await csrfFetch('/api/session', {\n        method: 'POST',\n        body: JSON.stringify(user)\n    });\n    debugger\n    let data = await res.json();\n    debugger\n    sessionStorage.setItem('currentUser', JSON.stringify(data.user));\n    debugger\n    dispatch({\n        type: RECEIVE_USER,\n        user: data\n    })\n};\n\nexport const logoutUser = userId => async dispatch => {\n    let res = await csrfFetch('/api/session', {\n        method: 'DELETE'\n    });\n    sessionStorage.setItem('currentUser', null)\n    dispatch({\n        type: REMOVE_USER,\n        userId: userId\n    });\n}\n\nexport const updateUser = (user) => async dispatch => {\n    const response = await csrfFetch(`/api/users/${user.id}`, {\n        method: 'PATCH',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify(user)\n    })\n    const data = await response.json();\n\n    dispatch({\n        type: RECEIVE_USER,\n        user: data\n    })\n}\n\nexport default function usersReducer(state = {}, action) {\n    let newState = {...state};\n\n    switch(action.type) {\n        case RECEIVE_USER:\n            newState[action.user.id] = action.user;\n            return newState;\n        case REMOVE_USER:\n            delete newState[action.userId];\n            return newState;\n        default:\n            return state;\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}